{% extends "page.html" %}
{% block page_title %}Data Insight{% endblock %}

{% block content %}
  <h1>Data Insight</h1>
  <div id="insight-list">
    {% include "insight/list.html" %}
  </div>

  <script>
    function fetchInsight() {
      fetch('{{ h.url_for("insight.insight_index") }}')
        .then(response => response.text())
        .then(html => {
          // Ambil bagian daftar group dari response
          const tempDiv = document.createElement('div');
          tempDiv.innerHTML = html;
          const newList = tempDiv.querySelector('#insight-list').innerHTML;
          document.getElementById('insight-list').innerHTML = newList;
        })
        .catch(err => console.error('Fetch Insight error:', err));
    }

    // Refresh setiap 30 detik
    setInterval(fetchInsight, 30000);
  </script>
{% endblock %}
