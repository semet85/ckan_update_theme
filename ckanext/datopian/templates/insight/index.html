{% extends "page.html" %}

{% block subtitle %}Data Insight{% endblock %}

{% block page_primary_action %}
  <h1 class="page-heading">Data Insight</h1>

  <!-- Search Bar -->
  <form method="get" action="/insight" class="insight-search-form">
    <input type="text" name="q" value="{{ c.page.search_query or '' }}" placeholder="Cari Insight..." />
    <button type="submit">Cari</button>
  </form>
{% endblock %}

{% block primary_content_inner %}
  <div class="insight-grid">
    {% if c.page.items %}
      {% for group in c.page.items %}
        <div class="insight-card">
          <a href="{{ h.url_for('insight_read', id=group.id) }}">
            <h2>{{ group.display_name }}</h2>
          </a>
          {% if group.description %}
          <p>{{ group.description|truncate(150) }}</p>
          {% endif %}
        </div>
      {% endfor %}
    {% else %}
      <p>Tidak ada Insight yang sesuai pencarian.</p>
    {% endif %}
  </div>

  {{ c.page.pager()|safe }}
{% endblock %}

{% block extra_styles %}
<style>
.insight-search-form {
  margin: 15px 0;
  display: flex;
  gap: 10px;
}
.insight-search-form input[type=text] {
  flex: 1;
  padding: 8px;
  font-size: 1rem;
  border: 1px solid #ccc;
  border-radius: 5px;
}
.insight-search-form button {
  padding: 8px 15px;
  font-size: 1rem;
  background: #0078d4;
  color: #fff;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
.insight-search-form button:hover {
  background: #005ea3;
}

/* tetap styling grid & card */
.insight-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  margin-top: 20px;
}
.insight-card {
  border: 1px solid #ddd;
  padding: 15px;
  border-radius: 8px;
  background: #fff;
  transition: box-shadow 0.3s;
}
.insight-card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.insight-card h2 {
  font-size: 1.2rem;
  margin-bottom: 8px;
}
.insight-card p {
  font-size: 0.95rem;
  color: #555;
}
</style>
{% endblock %}
