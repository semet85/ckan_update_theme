{# ==== SLIDE KATEGORI (non-insight) ==== #}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<h2 class="text-center mb-4"><i class="fas fa-folder-open"></i> Topik Data</h2>

{# Ambil featured groups #}
{% set groups = h.get_featured_groups(count=15) %}

{# Filter: hanya group yang BUKAN insight-* #}
{% set ns = namespace(items=[]) %}
{% for g in groups %}
  {% if not (g.name and g.name.startswith('insight-')) %}
    {% set _ = ns.items.append(g) %}
  {% endif %}
{% endfor %}
{% set groups = ns.items %}

{% if not groups %}
  <p class="text-center">{{ _('Tidak ada kategori non-insight yang ditemukan.') }}</p>
{% else %}
<div class="carousel-container carousel-container--groups">
  <div class="group-carousel">
    <div class="carousel-track-wrapper">
      <div class="carousel-track">

        {# Loop utama (sudah tersaring) #}
        {% for group in groups %}
        <div class="group-card">
          <a href="{{ h.url_for('group.read', id=group.name) }}">
            <img
              src="{{ group.image_display_url or h.url_for_static('/base/images/placeholder-group.png') }}"
              alt="{{ group.title }}"
              loading="lazy"
            >
            <h5>{{ group.title }}</h5>
          </a>
        </div>
        {% endfor %}

        {# Duplikasi untuk efek infinite scroll (pakai list yang sama) #}
        {% for group in groups %}
        <div class="group-card">
          <a href="{{ h.url_for('group.read', id=group.name) }}">
            <img
              src="{{ group.image_display_url or h.url_for_static('/base/images/placeholder-group.png') }}"
              alt="{{ group.title }}"
              loading="lazy"
            >
            <h5>{{ group.title }}</h5>
          </a>
        </div>
        {% endfor %}

      </div>
    </div>
  </div>

  {# Tombol carousel di dalam container agar posisinya relatif #}
  <button class="carousel-btn left-btn" aria-label="Sebelumnya">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
  </button>
  <button class="carousel-btn right-btn" aria-label="Berikutnya">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 5 7 7-7 7"/><path d="M5 12h14"/></svg>
  </button>
</div>
{% endif %}

<style>
  .carousel-container{ position:relative; }
  .group-carousel{ overflow:hidden; width:100%; position:relative; }
  .carousel-track-wrapper{ overflow:hidden; }
  .carousel-track{ display:flex; transition: transform 0.5s linear; will-change: transform; }

  .group-card{
    min-wi
